Настройка DNS на сетевом оборудовании (Cisco-like CLI)
Разберём вашу конфигурацию и её практическое применение:

Полный разбор команд
bash
en
conf t
ip name-server 192.168.1.2
ip domain-name au-team.irpo
ip domain-lookup
no ip name-server 77.88.8.8
do wr
do ping hq-srv
Пошаговое объяснение
Активация привилегированного режима

bash
en
Вход в режим enable (привилегированный)

Переход в режим конфигурации

bash
conf t
Вход в глобальную конфигурацию

Назначение DNS-сервера

bash
ip name-server 192.168.1.2
Указывает локальный DNS-сервер (BIND на 192.168.1.2)

Все DNS-запросы будут идти только к этому серверу

Установка доменного суффикса

bash
ip domain-name au-team.irpo
Автоматически добавляет суффикс к неполным именам

Пример: ping hq-srv → преобразуется в hq-srv.au-team.irpo

Активация DNS-резолвинга

bash
ip domain-lookup
Включает преобразование имён в IP-адреса

Без этой команды оборудование не будет делать DNS-запросы

Удаление публичного DNS

bash
no ip name-server 77.88.8.8
Убирает внешний DNS (Яндекс) из конфигурации

Оставляет только внутренний DNS для безопасности

Сохранение конфигурации

bash
do wr
Сохраняет изменения в энергонезависимую память

Тестирование работы DNS

bash
do ping hq-srv
Проверяет:

Работу DNS (преобразование имени в IP)

Связность с хостом

Практическое применение
Когда используется:

В корпоративных сетях с внутренними DNS-серверами

При необходимости централизованного управления именами

Для обеспечения безопасности (отсутствие внешних DNS-запросов)

Как работает:

Diagram
Code
Диагностика проблем
Если ping hq-srv не работает:

Проверьте базовую связность:

bash
do ping 192.168.1.2
Проверьте кэш DNS:

bash
do show hosts
Проверьте текущие настройки DNS:

bash
do show running-config | include name-server|domain
Включите отладку DNS:

bash
debug ip domain
Дополнительные возможности
Добавление резервного DNS:

bash
ip name-server 192.168.1.2 192.168.1.3
Статические записи (в обход DNS):

bash
ip host hq-srv 192.168.1.2
Отключение DNS-запросов (если мешают):

bash
no ip domain-lookup
Эта конфигурация обеспечивает:

Полный контроль над разрешением имён

Повышенную безопасность сети

Удобство администрирования через короткие имена
------------------------BR-RTR-DNS
en
conf t
ip name-server 192.168.1.2
ip domain-name au-team.irpo
ip domain-lookup
no ip name-server 77.88.8.8
do wr
do ping hq-srv
